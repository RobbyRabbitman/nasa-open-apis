<section class="page">
  <section class="relative">
    <div
      *ngIf="(loading$ | async) === true"
      class="absolute z-[1] top-0 right-0 bottom-0 left-0 flex flex-col items-center justify-center backdrop"
    >
      <mat-spinner></mat-spinner>
    </div>
    <table
      mat-table
      class="w-full"
      [dataSource]="(browse$ | async)?.near_earth_objects ?? []"
    >
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let neo">{{ neo.name }}</td>
      </ng-container>
      <ng-container matColumnDef="is_potentially_hazardous_asteroid">
        <th mat-header-cell *matHeaderCellDef>Is likely harmless</th>
        <td mat-cell *matCellDef="let neo">
          <mat-icon *ngIf="neo.is_potentially_hazardous_asteroid" color="warn">
            question_mark
          </mat-icon>
          <mat-icon
            *ngIf="!neo.is_potentially_hazardous_asteroid"
            color="primary"
          >
            verified
          </mat-icon>
        </td>
      </ng-container>
      <ng-container matColumnDef="is_sentry_object">
        <th mat-header-cell *matHeaderCellDef>Is sentry object</th>
        <td mat-cell *matCellDef="let neo">
          <!-- TODO success over primary -->
          <mat-icon
            [color]="
              neo.is_potentially_hazardous_asteroid
                ? neo.is_sentry_object
                  ? 'primary'
                  : 'warn'
                : ''
            "
          >
            {{ neo.is_sentry_object ? "videocam" : "videocam_off" }}
          </mat-icon>
        </td>
      </ng-container>
      <ng-container matColumnDef="estimated_diameter">
        <th mat-header-cell *matHeaderCellDef>Max. estimated diameter</th>
        <td mat-cell *matCellDef="let neo">
          {{
            neo.estimated_diameter.kilometers.estimated_diameter_max | number
          }}
          km
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="columns"></tr>
      <tr mat-row *matRowDef="let row; columns: columns"></tr>
    </table>
  </section>
  <mat-paginator
    [length]="length$ | async"
    [pageSizeOptions]="[20]"
    showFirstLastButtons
  >
  </mat-paginator>
</section>
